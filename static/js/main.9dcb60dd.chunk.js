(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(163)},129:function(e,t,a){},134:function(e,t,a){},138:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){},144:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},156:function(e,t,a){},160:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"FETCH_ITEMS",function(){return b}),a.d(n,"FETCH_ITEMS_SUCCESS",function(){return h}),a.d(n,"FETCH_ITEMS_FAILURE",function(){return v}),a.d(n,"FETCH_ITEMS_STORAGE",function(){return I}),a.d(n,"FETCH_ITEMS_STORAGE_SUCCESS",function(){return S}),a.d(n,"FETCH_ITEMS_STORAGE_FAILURE",function(){return T}),a.d(n,"RESET_ITEMS",function(){return O}),a.d(n,"SET_ACTIVE_ITEM",function(){return j}),a.d(n,"RESET_ACTIVE_ITEM",function(){return y}),a.d(n,"UPDATE_ITEM",function(){return g}),a.d(n,"UPDATE_ITEM_SUCCESS",function(){return C}),a.d(n,"UPDATE_ITEM_FAILURE",function(){return A});var r={};a.r(r),a.d(r,"fetchItemsAction",function(){return N}),a.d(r,"fetchItemsSuccessAction",function(){return U}),a.d(r,"fetchItemsFailureAction",function(){return M}),a.d(r,"fetchItemsStorageAction",function(){return F}),a.d(r,"fetchItemsStorageSuccessAction",function(){return R}),a.d(r,"fetchItemsStorageFailureAction",function(){return k}),a.d(r,"resetItemsAction",function(){return x}),a.d(r,"setActiveItemAction",function(){return P}),a.d(r,"resetActiveItemAction",function(){return H}),a.d(r,"updateItemsAction",function(){return L}),a.d(r,"updateItemsSuccessAction",function(){return w}),a.d(r,"updateItemsFailureAction",function(){return D});var c=a(0),i=a.n(c),o=a(111),l=a.n(o),s=(a(129),a(5)),u=a(6),m=a(8),d=a(7),E=a(9),p=a(173),f=a(174),_=a(21),b="FETCH_ITEMS",h="FETCH_ITEMS_SUCCESS",v="FETCH_ITEMS_FAILURE",I="FETCH_ITEMS_STORAGE",S="FETCH_ITEMS_STORAGE_SUCCESS",T="FETCH_ITEMS_STORAGE_FAILURE",O="RESET_ITEMS",j="SET_ACTIVE_ITEM",y="RESET_ACTIVE_ITEM",g="UPDATE_ITEM",C="UPDATE_ITEM_SUCCESS",A="UPDATE_ITEM_FAILURE",N=function(e){return{type:n.FETCH_ITEMS,payload:e}},U=function(e,t){return{type:n.FETCH_ITEMS_SUCCESS,payload:{items:e,totalResult:t}}},M=function(e){return{type:n.FETCH_ITEMS_FAILURE,payload:e}},F=function(){return{type:n.FETCH_ITEMS_STORAGE}},R=function(e){return{type:n.FETCH_ITEMS_STORAGE_SUCCESS,payload:{items:e}}},k=function(e){return{type:n.FETCH_ITEMS_STORAGE_FAILURE,payload:e}},x=function(){return{type:n.RESET_ITEMS}},P=function(e){return{type:n.SET_ACTIVE_ITEM,payload:e}},H=function(){return{type:n.RESET_ACTIVE_ITEM}},L=function(e){return{type:n.UPDATE_ITEM,payload:e}},w=function(e){return{type:n.UPDATE_ITEM_SUCCESS,payload:e}},D=function(e){return{type:n.UPDATE_ITEM_FAILURE,payload:e}},G=a(167),z=a(17),V=a(19),q=a(58),W=a(48),B=a.n(W),J=(a(134),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bsPrefix,a=e.variant,n=(e.size,e.active),r=e.className,c=e.block,o=e.type,l=(e.innerRef,Object(q.a)(e,["bsPrefix","variant","size","active","className","block","type","innerRef"])),s=B()(r,t,n&&"active",c&&"".concat(t,"--block"),"".concat(t,"--").concat(a));return i.a.createElement("button",Object.assign({},l,{type:o,className:s}))}}]),t}(c.PureComponent));J.defaultProps={bsPrefix:"button",variant:"primary",active:!1,disabled:!1,type:"button"};var Y=J,K=a(114),$=a(115),Q=a(116),X=a.n(Q),Z=(a(138),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.nasaId,n=e.imageUrl,r=n?{backgroundImage:"url('".concat(n,"')")}:{backgroundColor:"#000"};return"video"===t?i.a.createElement(G.a,{to:"/video/".concat(a)},i.a.createElement("div",{className:"thumbnail",style:r},i.a.createElement("div",{className:"thumbnail__play"},i.a.createElement(z.a,{icon:V.d})))):i.a.createElement("div",{className:"thumbnail",style:r})}}]),t}(c.PureComponent)),ee=(a(140),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.title,n=e.description,r=e.creator,c=e.dateCreated,o=e.nasaId,l=e.imageUrl,s=e.type;return i.a.createElement("div",{className:"item"},i.a.createElement(Z,{nasaId:o,imageUrl:l,type:s}),i.a.createElement("div",{className:"item__sub-title text--xsmall color--dark-gray"},i.a.createElement("div",{className:"item__sub-title__media-type"},r),i.a.createElement("div",{className:"item__sub-title__date-created"},i.a.createElement(X.a,{format:"DD MMM, YYYY"},c))),i.a.createElement("div",{className:"item__title text--small"},a),i.a.createElement("div",{className:"item__description text--xsmall text--justify color--dark-gray"},i.a.createElement($.a,{lines:3,ellipsis:"..."},n)),i.a.createElement("div",{className:"item__actions text--xsmall color--dark-gray"},t))}}]),t}(c.PureComponent)),te=a(122),ae="NASACollection";var ne=a(171),re=a(169),ce=(a(142),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.onClosePopup;return i.a.createElement("div",{className:"popup"},i.a.createElement("div",{className:"popup__overlay"}),i.a.createElement("div",{className:"popup__container"},i.a.createElement("div",{className:"popup__body"},i.a.createElement("div",{className:"popup__body__close",onClick:a},i.a.createElement(z.a,{icon:V.f})),t)))}}]),t}(c.Component)),ie=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.bsPrefix,a=e.className,n=e.size,r=Object(q.a)(e,["bsPrefix","className","size"]),c=B()(t,a,"form-control",n&&"form-control--".concat(n));return i.a.createElement("input",Object.assign({},r,{className:c}))}}]),t}(c.PureComponent);ie.defaultProps={bsPrefix:"input"};var oe=ie,le=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.bsPrefix,n=e.className,r=e.size,c=Object(q.a)(e,["id","bsPrefix","className","size"]),o=B()(a,n,"form-control",r&&"form-control--".concat(r));return i.a.createElement("textarea",Object.assign({},c,{id:t,className:o}))}}]),t}(c.PureComponent);le.defaultProps={bsPrefix:"textarea"};a(144);var se=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.unSelectItem,a=e.handleSubmit,n=(e.isUpdateForm,e.addItemToNasaCollection);return i.a.createElement(ce,{onClosePopup:function(){return t()}},i.a.createElement("div",{className:"form"},i.a.createElement("div",{className:"form__header"},i.a.createElement("div",{className:"form__header__title"},"Add to Collection")),i.a.createElement("form",{onSubmit:a(n),className:"form__body"},i.a.createElement(ne.a,{id:"itemFormTitle",name:"title",type:"text",size:"small",component:"input",className:"input form-control form-control--small"}),i.a.createElement(ne.a,{id:"itemFormDescription",name:"description",size:"small",component:"textarea",rows:"8",className:"textarea form-control form-control--small"}),i.a.createElement(ne.a,{id:"itemFormType",name:"type",size:"small",component:"select",className:"select form-control form-control--small"},i.a.createElement("option",{value:"video"},"Video"),i.a.createElement("option",{value:"image"},"Image")),i.a.createElement(ne.a,{id:"itemFormImage",name:"imageUrl",type:"text",size:"small",component:"input",className:"input form-control form-control--small"}),i.a.createElement(ne.a,{id:"itemFormVideo",name:"videoUrl",type:"text",size:"small",component:"input",className:"input form-control form-control--small"}),i.a.createElement(Y,{type:"submit"},i.a.createElement(z.a,{icon:V.b})," Add to collection"))))}}],[{key:"renderError",value:function(e){return e&&e.error&&e.error.message?i.a.createElement("div",{className:"alert alert-danger"},e?e.error.message:""):i.a.createElement("span",null)}}]),t}(c.Component),ue=Object(re.a)({form:"Form",validate:function(e){var t={};return e.type&&""!==e.type.trim()||(t.type="Required"),e.imageUrl&&""!==e.imageUrl.trim()||(t.imageUrl="Required"),e.videoUrl&&""!==e.videoUrl.trim()||(t.videoUrl="Required"),t}})(se),me=Object(_.b)(function(e){return{initialValues:e.item.activeItem.item}},function(e){return{unSelectItem:function(){e(r.resetActiveItemAction())},addItemToNasaCollection:function(e){!function(e){var t=JSON.parse(localStorage.getItem(ae));if(t){t.findIndex(function(t){return t.nasaId===e.nasaId});var a=Object(te.a)(t).concat([e]);localStorage.setItem(ae,JSON.stringify(a))}else{var n=[e];localStorage.setItem(ae,JSON.stringify(n))}}(e)}}})(ue),de=(a(146),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentWillUnmount",value:function(){this.props.resetItems()}},{key:"renderActionButtons",value:function(e){if(this.props.isAddedToCollection)return i.a.createElement("div",null,i.a.createElement(Y,{className:"text--small",variant:"default"},i.a.createElement(z.a,{icon:K.a})," ",i.a.createElement("span",{className:"color--gray"}))," ",i.a.createElement(Y,{className:"text--small",variant:"default"},i.a.createElement(z.a,{icon:V.g})," ",i.a.createElement("span",{className:"color--gray"}))," ",i.a.createElement(Y,{className:"text--small",variant:"default"},i.a.createElement(z.a,{icon:V.c})," ",i.a.createElement("span",{className:"color--gray"})));var t=this.props.selectItem;return i.a.createElement("div",null,i.a.createElement(Y,{onClick:function(){return t(e)},className:"text--small",variant:"default",block:!0},i.a.createElement(z.a,{icon:V.e})," ",i.a.createElement("span",{className:"color--gray"},"Add to NASA collection")))}},{key:"renderItemList",value:function(e){var t=this;return e.map(function(e,a){return i.a.createElement("div",{className:"collection__item",key:a},i.a.createElement(ee,{title:e.title,description:e.description,creator:e.creator,dateCreated:e.dateCreated,nasaId:e.nasaId,imageUrl:e.imageUrl,type:e.type},t.renderActionButtons(e)))})}},{key:"render",value:function(){var e=this.props,t=e.items,a=e.isSetActiveItem;return i.a.createElement("div",{className:"collection"},t?this.renderItemList(t):"",a?i.a.createElement(me,null):"")}}]),t}(c.PureComponent)),Ee=Object(_.b)(function(e){return{isSetActiveItem:!!e.item.activeItem.item,items:e.item.itemsList.items}},function(e){return{selectItem:function(t){e(r.setActiveItemAction(t))},resetItems:function(){e(r.resetItemsAction())}}})(de),pe=(a(148),function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchItems()}},{key:"render",value:function(){return i.a.createElement("div",{className:"collection-page"},i.a.createElement("div",{className:"collection-page__header"},i.a.createElement("div",{className:"collection-page__header__title"},i.a.createElement("label",null,"NASA Collection")),i.a.createElement("div",{className:"collection-page__header__actions"},i.a.createElement(G.a,{to:"/nasa-search"},i.a.createElement(Y,null,i.a.createElement(z.a,{icon:V.e})," Add new item")))),i.a.createElement("div",{className:"collection-page__body"},i.a.createElement(Ee,{isAddedToCollection:!0})))}}]),t}(c.Component)),fe=Object(_.b)(function(e){return{totalResult:e.item.itemsList.totalResult,loading:e.item.itemsList.loading}},function(e){return{fetchItems:function(){e(r.fetchItemsStorageAction())}}})(pe),_e=(a(150),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={queryString:null},a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"search",value:function(e){var t=this;"Enter"===e.key&&this.setState({queryString:e.target.value},function(){t.props.fetchItems(t.state.queryString)})}},{key:"render",value:function(){var e=this,t=this.state.queryString,a=this.props,n=a.totalResult,r=a.loading;return i.a.createElement("div",{className:"search-page"},i.a.createElement("div",{className:"search-page__header"},i.a.createElement("div",{className:"search-page__header__actions"},i.a.createElement(G.a,{to:"/",className:"text--small"},i.a.createElement(z.a,{icon:V.a})," Back to Collection")),i.a.createElement("div",{className:"search-page__header__title"},i.a.createElement("label",null,"Search from Nasa")),i.a.createElement("div",{className:"search-page__header__input"},i.a.createElement(oe,{type:"text",placeholder:"Type something then Enter to search...",onKeyPress:function(t){return e.search(t)}}))),i.a.createElement("div",{className:"search-page__body"},i.a.createElement("div",{className:"search-page__body__total-hits"},null!==n?i.a.createElement("span",null,n,' result for "',t,'"'):"",r?i.a.createElement("span",null,"loading..."):""),i.a.createElement(Ee,{isAddedToCollection:!1})))}}]),t}(c.Component)),be=Object(_.b)(function(e){return{totalResult:e.item.itemsList.totalResult,loading:e.item.itemsList.loading}},function(e){return{fetchItems:function(t){e(r.fetchItemsAction(t))}}})(_e),he=function(e){var t=e.match;return i.a.createElement("h2",null,t.params.nasaId)},ve=a(119),Ie=a.n(ve),Se=(a(156),function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={videoUrl:null};var n=e.match.params.nasaId;return fetch("https://images-api.nasa.gov/asset/".concat(n)).then(function(e){return e.json()}).then(function(e){return a.setState({videoUrl:e.collection.items[0].href})}),a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.videoUrl,t=this.props.history.goBack;return i.a.createElement("div",{className:"video-page"},i.a.createElement("div",{className:"video-page__header"},i.a.createElement("div",{className:"video-page__header__title"},i.a.createElement("label",null,"NASA video")),i.a.createElement("div",{className:"video-page__header__actions"},i.a.createElement("span",{onClick:t,className:"color--white"},i.a.createElement(z.a,{icon:V.f})))),i.a.createElement("div",{className:"video-page__body"},i.a.createElement(Ie.a,{url:e,controls:!0,width:"100%",height:"100%"})))}}]),t}(c.Component)),Te=a(10),Oe=a(170),je=a(120),ye=a(175),ge=a(27),Ce={itemsList:{items:[],totalResult:null,error:null,loading:!1},activeItem:{item:null}},Ae=Object(Te.combineReducers)({form:ye.a,item:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.FETCH_ITEMS:case n.FETCH_ITEMS_STORAGE:return Object(ge.a)({},t,{itemsList:{items:[],totalResult:null,error:null,loading:!0}});case n.FETCH_ITEMS_SUCCESS:case n.FETCH_ITEMS_STORAGE_SUCCESS:return Object(ge.a)({},t,{itemsList:Object(ge.a)({},a.payload,{error:null,loading:!1})});case n.FETCH_ITEMS_FAILURE:case n.FETCH_ITEMS_STORAGE_FAILURE:return e=a.payload||{message:a.payload.message},Object(ge.a)({},t,{itemsList:{items:[],totalResult:null,error:e,loading:!1}});case n.RESET_ITEMS:return Object(ge.a)({},t,{itemsList:{items:[],totalResult:null,error:null,loading:!1}});case n.SET_ACTIVE_ITEM:return Object(ge.a)({},t,{activeItem:{item:a.payload}});case n.RESET_ACTIVE_ITEM:return Object(ge.a)({},t,{activeItem:{item:null}});case n.UPDATE_ITEM_SUCCESS:var r=!!t.itemsList.items&&t.itemsList.items.map(function(e){var t=a.payload.find(function(t){return encodeURI(e.nasaId)===t.nasaId});return t?Object(ge.a)({},e,t,{nasaId:e.nasaId}):e});return Object(ge.a)({},t,{itemsList:Object(ge.a)({},t.itemsList,{items:r})});default:return t}}}),Ne=a(172),Ue=a(166),Me=a(164),Fe=a(165),Re=a(158),ke=a(159),xe=a(168);function Pe(e){return fetch("https://images-api.nasa.gov/search?q=".concat(e,"&media_type=video")).then(function(e){return e.json()}).then(function(e){return{links:e.collection.links,metadata:e.collection.metadata,items:e.collection.items.map(function(e){return function(e){var t,a;if(t=e.data&&e.data.length?{nasaId:e.data[0].nasa_id,title:e.data[0].title,description:e.data[0].description,creator:e.data[0].center,dateCreated:e.data[0].date_created,type:e.data[0].media_type}:{nasaId:null,title:null,description:null,creator:null,dateCreated:null,imageUrl:null,type:null},e.links&&e.links.length&&"image"===t.type){var n=e.links.find(function(e){return"image"===e.render});a=n?n.href:null}return Object(ge.a)({},t,{imageUrl:a})}(e)})}})}var He=Object(Ne.a)(function(e){return e.pipe(Object(Ue.a)(n.FETCH_ITEMS),Object(Re.a)(function(e){return Object(Me.a)(Pe(e.payload)).pipe(Object(ke.a)(function(e){var t=e.items,a=e.metadata.total_hits;return r.fetchItemsSuccessAction(t,a)}),Object(xe.a)(function(e){return Object(Fe.a)(r.fetchItemsFailureAction(e))}))}))},function(e){return e.pipe(Object(Ue.a)(n.FETCH_ITEMS_STORAGE),Object(Re.a)(function(){return Object(Fe.a)(JSON.parse(localStorage.getItem(ae))).pipe(Object(ke.a)(function(e){return console.log(e),r.fetchItemsStorageSuccessAction(e)}),Object(xe.a)(function(e){return Object(Fe.a)(r.fetchItemsStorageFailureAction(e))}))}))},function(e){return e.pipe(Object(Ue.a)(n.FETCH_ITEMS_SUCCESS),Object(Re.a)(function(e){return Object(Me.a)(Promise.all(e.payload.items.map(function(e){return t=e.nasaId,fetch("https://images-api.nasa.gov/asset/".concat(t)).then(function(e){return e.json()});var t}))).pipe(Object(ke.a)(function(e){var t=e.map(function(e){return{nasaId:e.collection&&e.collection.href.split("https://images-api.nasa.gov/asset/")[1]||null,videoUrl:e.collection&&function(e){var t=e.find(function(e){return e.href.endsWith("~small.mp4")});return t?t.href:null}(e.collection.items),imageUrl:e.collection&&function(e){var t=e.find(function(e){return e.href.endsWith("~small_thumb_00003.png")});return t?t.href:null}(e.collection.items)||"https://dumielauxepices.net/sites/default/files/black-860221-5629409.jpg"}});return r.updateItemsAction(t)}),Object(xe.a)(function(e){return Object(Fe.a)(r.updateItemsFailureAction(e))}))}))},function(e){return e.pipe(Object(Ue.a)(n.UPDATE_ITEM),Object(Re.a)(function(e){return Object(Fe.a)(r.updateItemsSuccessAction(e.payload))}))}),Le=Object(Ne.a)(He);a(160);var we=function(e){var t=Object(Oe.a)(),a=Object(je.composeWithDevTools)(Object(Te.applyMiddleware)(t)),n=Object(Te.createStore)(Ae,e,a);return t.run(Le),n}(),De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(_.a,{store:we},i.a.createElement(p.a,null,i.a.createElement("div",null,i.a.createElement(f.a,{exact:!0,path:"/",component:fe}),i.a.createElement(f.a,{path:"/nasa-search",component:be}),i.a.createElement(f.a,{path:"/video/:nasaId",component:Se}),i.a.createElement(f.a,{path:"/edit/:nasaId",component:he}))))}}]),t}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,2,1]]]);
//# sourceMappingURL=main.9dcb60dd.chunk.js.map